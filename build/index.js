!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).Notifications={})}(this,function(t){"use strict";function n(){}function o(t,n){for(const o in n)t[o]=n[o];return t}function e(t){return t()}function i(){return Object.create(null)}function r(t){t.forEach(e)}function c(t){return"function"==typeof t}function s(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function f(t,n,o){if(t){const e=a(t,n,o);return t[0](e)}}function a(t,n,e){return t[1]?o({},o(n.$$scope.ctx,t[1](e?e(n):{}))):n.$$scope.ctx}function u(t,n,e,i){return t[1]?o({},o(n.$$scope.changed||{},t[1](i?i(e):{}))):n.$$scope.changed||{}}function l(t,n){t.appendChild(n)}function $(t,n,o){t.insertBefore(n,o||null)}function d(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function h(){return m(" ")}function g(){return m("")}let v;function y(t){v=t}function b(){if(!v)throw new Error("Function called outside component initialization");return v}const x=[],_=Promise.resolve();let w=!1;const k=[],N=[],E=[];function I(t){N.push(t)}function j(){const t=new Set;do{for(;x.length;){const t=x.shift();y(t),M(t.$$)}for(;k.length;)k.shift()();for(;N.length;){const n=N.pop();t.has(n)||(n(),t.add(n))}}while(x.length);for(;E.length;)E.pop()();w=!1}function M(t){t.fragment&&(t.update(t.dirty),r(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(I))}let O;function A(){O={remaining:0,callbacks:[]}}function z(){O.remaining||r(O.callbacks)}function C(t){O.callbacks.push(t)}function T(t,n){C(()=>{!function(t,n){t.d(1),n.delete(t.key)}(t,n)}),t.o(1)}function S(t,n,o){const{fragment:i,on_mount:s,on_destroy:f,after_render:a}=t.$$;i.m(n,o),I(()=>{const n=s.map(e).filter(c);f?f.push(...n):r(n),t.$$.on_mount=[]}),a.forEach(I)}function B(t,n){t.$$.dirty||(x.push(t),w||(w=!0,_.then(j)),t.$$.dirty=i()),t.$$.dirty[n]=!0}function L(t,o,e,c,s,f){const a=v;y(t);const u=o.props||{},l=t.$$={fragment:null,ctx:null,props:f,update:n,not_equal:s,bound:i(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(a?a.$$.context:[]),callbacks:i(),dirty:null};let $=!1;l.ctx=e?e(t,u,(n,o)=>{l.ctx&&s(l.ctx[n],l.ctx[n]=o)&&(l.bound[n]&&l.bound[n](o),$&&B(t,n))}):u,l.update(),$=!0,r(l.before_render),l.fragment=c(l.ctx),o.target&&(o.hydrate?l.fragment.l(function(t){return Array.from(t.childNodes)}(o.target)):l.fragment.c(),o.intro&&t.$$.fragment.i&&t.$$.fragment.i(),S(t,o.target,o.anchor),j()),y(a)}class P{$destroy(){var t,o;o=!0,(t=this).$$&&(r(t.$$.on_destroy),t.$$.fragment.d(o),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={}),this.$destroy=n}$on(t,n){const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(){}}const q={};var D=()=>(function(t){return b().$$.context.get(t)})(q);function F(t){var n,o,e,i,r,c,s,g=t.notification.text;const v=t.$$slots.default,y=f(v,t,null);return{c(){var c,f,a,u;n=p("div"),o=p("div"),y||(e=m(g)),y&&y.c(),i=h(),(r=p("button")).textContent="Ã—",o.className="notification-context svelte-1igzsu7",r.className="svelte-1igzsu7",n.className="notification svelte-1igzsu7",c=r,f="click",a=t.removeNotifications,c.addEventListener(f,a,u),s=()=>c.removeEventListener(f,a,u)},l(t){y&&y.l(div0_nodes)},m(t,s){$(t,n,s),l(n,o),y?y.m(o,null):l(o,e),l(n,i),l(n,r),c=!0},p(t,n){y||c&&!t.notification||g===(g=n.notification.text)||function(t,n){n=""+n,t.data!==n&&(t.data=n)}(e,g),y&&y.p&&t.$$scope&&y.p(u(v,n,t,null),a(v,n,null))},i(t){c||(y&&y.i&&y.i(t),c=!0)},o(t){y&&y.o&&y.o(t),c=!1},d(t){t&&d(n),y&&y.d(t),s()}}}function G(t,n,o){let{notification:e}=n,i=null;const{id:r,removeAfter:c}=e,{remove:s}=D(),f=()=>s(r);var a;c&&(i=setTimeout(f,c)),a=()=>{c&&i&&clearTimeout(i)},b().$$.on_destroy.push(a);let{$$slots:u={},$$scope:l}=n;return t.$set=t=>{"notification"in t&&o("notification",e=t.notification),"$$scope"in t&&o("$$scope",l=t.$$scope)},{notification:e,removeNotifications:f,$$slots:u,$$scope:l}}class H extends P{constructor(t){super(),L(this,t,G,F,s,["notification"])}}const J=["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"],K=(t,n)=>{if(!(t=>!(!t||!t.text||"string"!=typeof t.text||!J.includes(t.position)))(t))throw new Error("");const{id:o=(new Date).getTime(),removeAfter:e=+t.removeAfter,...i}=t;n(t=>[...t,{id:o,removeAfter:e,...i}])};var Q=(()=>{const{subscribe:t,set:o,update:e}=function(t,o=n){let e;const i=[];function r(n){if(s(t,n)){if(t=n,!e)return;i.forEach(t=>t[1]()),i.forEach(n=>n[0](t))}}return{set:r,update:function(n){r(n(t))},subscribe:function(c,s=n){const f=[c,s];return i.push(f),1===i.length&&(e=o(r)||n),c(t),()=>{const t=i.indexOf(f);-1!==t&&i.splice(t,1),0===i.length&&e()}}}}([]);return{subscribe:t,add:t=>K(t,e),remove:t=>((t,n)=>n(n=>n.filter(n=>n.id!==t)))(t,e),clear:()=>(t=>t([]))(o)}})();function R(t,n,o){const e=Object.create(t);return e.notification=n[o],e}function U(t,n,o){const e=Object.create(t);return e.position=n[o],e}function V(t){var n,o,e,i,r=[X,W],c=[];function s(t){return t.notificationItem?0:1}return n=s(t),o=c[n]=r[n](t),{c(){o.c(),e=g()},m(t,o){c[n].m(t,o),$(t,e,o),i=!0},p(t,i){var f=n;(n=s(i))===f?c[n].p(t,i):(A(),C(()=>{c[f].d(1),c[f]=null}),o.o(1),z(),(o=c[n])||(o=c[n]=r[n](i)).c(),o.i(1),o.m(e.parentNode,e))},i(t){i||(o&&o.i(),i=!0)},o(t){o&&o.o(),i=!1},d(t){c[n].d(t),t&&d(e)}}}function W(t){var n,o=new H({props:{notification:t.notification}});return{c(){o.$$.fragment.c()},m(t,e){S(o,t,e),n=!0},p(t,n){var e={};t.$store&&(e.notification=n.notification),o.$set(e)},i(t){n||(o.$$.fragment.i(t),n=!0)},o(t){o.$$.fragment.o(t),n=!1},d(t){o.$destroy(t)}}}function X(t){var n,o,e=t.notificationItem;function i(t){return{props:{notification:t.notification}}}if(e)var r=new e(i(t));return{c(){r&&r.$$.fragment.c(),n=g()},m(t,e){r&&S(r,t,e),$(t,n,e),o=!0},p(t,o){var c={};if(t.$store&&(c.notification=o.notification),e!==(e=o.notificationItem)){if(r){A();const t=r;C(()=>{t.$destroy()}),t.$$.fragment.o(1),z()}e?((r=new e(i(o))).$$.fragment.c(),r.$$.fragment.i(1),S(r,n.parentNode,n)):r=null}else e&&r.$set(c)},i(t){o||(r&&r.$$.fragment.i(t),o=!0)},o(t){r&&r.$$.fragment.o(t),o=!1},d(t){t&&d(n),r&&r.$destroy(t)}}}function Y(t,n){var o,e,i,r=n.notification.position===n.position&&V(n);return{key:t,first:null,c(){o=g(),r&&r.c(),e=g(),this.first=o},m(t,n){$(t,o,n),r&&r.m(t,n),$(t,e,n),i=!0},p(t,n){n.notification.position===n.position?r?(r.p(t,n),r.i(1)):((r=V(n)).c(),r.i(1),r.m(e.parentNode,e)):r&&(A(),C(()=>{r.d(1),r=null}),r.o(1),z())},i(t){i||(r&&r.i(),i=!0)},o(t){r&&r.o(),i=!1},d(t){t&&d(o),r&&r.d(t),t&&d(e)}}}function Z(t){var n,o,e,i=[],r=new Map,c=t.$store;const s=t=>t.notification.id;for(var f=0;f<c.length;f+=1){let n=R(t,c,f),o=s(n);r.set(o,i[f]=Y(o,n))}return{c(){for(n=p("div"),f=0;f<i.length;f+=1)i[f].c();o=h(),n.className=`notification-${t.position}`+" svelte-lv0aky"},m(t,r){for($(t,n,r),f=0;f<i.length;f+=1)i[f].m(n,null);l(n,o),e=!0},p(t,e){const c=e.$store;A(),i=function(t,n,o,e,i,r,c,s,f,a,u,l){let $=t.length,d=r.length,p=$;const m={};for(;p--;)m[t[p].key]=p;const h=[],g=new Map,v=new Map;for(p=d;p--;){const t=l(i,r,p),s=o(t);let f=c.get(s);f?e&&f.p(n,t):(f=a(s,t)).c(),g.set(s,h[p]=f),s in m&&v.set(s,Math.abs(p-m[s]))}const y=new Set,b=new Set;function x(t){t.i&&t.i(1),t.m(s,u),c.set(t.key,t),u=t.first,d--}for(;$&&d;){const n=h[d-1],o=t[$-1],e=n.key,i=o.key;n===o?(u=n.first,$--,d--):g.has(i)?!c.has(e)||y.has(e)?x(n):b.has(i)?$--:v.get(e)>v.get(i)?(b.add(e),x(n)):(y.add(i),$--):(f(o,c),$--)}for(;$--;){const n=t[$];g.has(n.key)||f(n,c)}for(;d;)x(h[d-1]);return h}(i,t,s,1,e,c,r,n,T,Y,o,R),z()},i(t){if(!e){for(var n=0;n<c.length;n+=1)i[n].i();e=!0}},o(t){for(f=0;f<i.length;f+=1)i[f].o();e=!1},d(t){for(t&&d(n),f=0;f<i.length;f+=1)i[f].d()}}}function tt(t){var n,o,e;const i=t.$$slots.default,r=f(i,t,null);for(var c=J,s=[],l=0;l<c.length;l+=1)s[l]=Z(U(t,c,l));function m(t,n,o){s[t]&&(n&&C(()=>{s[t].d(n),s[t]=null}),s[t].o(o))}return{c(){r&&r.c(),n=h(),o=p("div");for(var t=0;t<s.length;t+=1)s[t].c();o.className="notifications"},l(t){r&&r.l(t)},m(t,i){r&&r.m(t,i),$(t,n,i),$(t,o,i);for(var c=0;c<s.length;c+=1)s[c].m(o,null);e=!0},p(t,n){if(r&&r.p&&t.$$scope&&r.p(u(i,n,t,null),a(i,n,null)),t.positions||t.$store||t.notificationItem){c=J;for(var e=0;e<c.length;e+=1){const i=U(n,c,e);s[e]?(s[e].p(t,i),s[e].i(1)):(s[e]=Z(i),s[e].c(),s[e].i(1),s[e].m(o,null))}for(A();e<s.length;e+=1)m(e,1,1);z()}},i(t){if(!e){r&&r.i&&r.i(t);for(var n=0;n<c.length;n+=1)s[n].i();e=!0}},o(t){r&&r.o&&r.o(t),s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)m(t,0,0);e=!1},d(t){r&&r.d(t),t&&(d(n),d(o)),function(t,n){for(let o=0;o<t.length;o+=1)t[o]&&t[o].d(n)}(s,t)}}}function nt(t,n,o){let e;!function(t,n,o){const e=n.subscribe(o);t.$$.on_destroy.push(e.unsubscribe?()=>e.unsubscribe():e)}(t,Q,t=>{o("$store",e=t)});let{notificationItem:i=null}=n;!function(t,n){b().$$.context.set(t,n)}(q,Q);let{$$slots:r={},$$scope:c}=n;return t.$set=t=>{"notificationItem"in t&&o("notificationItem",i=t.notificationItem),"$$scope"in t&&o("$$scope",c=t.$$scope)},{notificationItem:i,$store:e,$$slots:r,$$scope:c}}t.Notifications=class extends P{constructor(t){super(),L(this,t,nt,tt,s,["notificationItem"])}},t.getContext=D,Object.defineProperty(t,"__esModule",{value:!0})});
