!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).Notifications={})}(this,function(t){"use strict";function n(){}function o(t,n){for(const o in n)t[o]=n[o];return t}function e(t){return t()}function i(){return Object.create(null)}function r(t){t.forEach(e)}function c(t){return"function"==typeof t}function s(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function f(t,n,o){if(t){const e=a(t,n,o);return t[0](e)}}function a(t,n,e){return t[1]?o({},o(n.$$scope.ctx,t[1](e?e(n):{}))):n.$$scope.ctx}function u(t,n,e,i){return t[1]?o({},o(n.$$scope.changed||{},t[1](i?i(e):{}))):n.$$scope.changed||{}}function l(t,n){t.appendChild(n)}function $(t,n,o){t.insertBefore(n,o||null)}function d(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function h(){return m(" ")}function g(){return m("")}function v(t,n){n=""+n,t.data!==n&&(t.data=n)}let b;function y(t){b=t}function x(){if(!b)throw new Error("Function called outside component initialization");return b}const _=[],k=Promise.resolve();let N=!1;const w=[],I=[],E=[];function j(t){I.push(t)}function M(){const t=new Set;do{for(;_.length;){const t=_.shift();y(t),O(t.$$)}for(;w.length;)w.shift()();for(;I.length;){const n=I.pop();t.has(n)||(n(),t.add(n))}}while(_.length);for(;E.length;)E.pop()();N=!1}function O(t){t.fragment&&(t.update(t.dirty),r(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(j))}let C;function S(){C={remaining:0,callbacks:[]}}function T(){C.remaining||r(C.callbacks)}function A(t){C.callbacks.push(t)}function B(t,n){A(()=>{!function(t,n){t.d(1),n.delete(t.key)}(t,n)}),t.o(1)}function L(t,n,o){const{fragment:i,on_mount:s,on_destroy:f,after_render:a}=t.$$;i.m(n,o),j(()=>{const n=s.map(e).filter(c);f?f.push(...n):r(n),t.$$.on_mount=[]}),a.forEach(j)}function P(t,n){t.$$.dirty||(_.push(t),N||(N=!0,k.then(M)),t.$$.dirty=i()),t.$$.dirty[n]=!0}function q(t,o,e,c,s,f){const a=b;y(t);const u=o.props||{},l=t.$$={fragment:null,ctx:null,props:f,update:n,not_equal:s,bound:i(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(a?a.$$.context:[]),callbacks:i(),dirty:null};let $=!1;l.ctx=e?e(t,u,(n,o)=>{l.ctx&&s(l.ctx[n],l.ctx[n]=o)&&(l.bound[n]&&l.bound[n](o),$&&P(t,n))}):u,l.update(),$=!0,r(l.before_render),l.fragment=c(l.ctx),o.target&&(o.hydrate?l.fragment.l(function(t){return Array.from(t.childNodes)}(o.target)):l.fragment.c(),o.intro&&t.$$.fragment.i&&t.$$.fragment.i(),L(t,o.target,o.anchor),M()),y(a)}class z{$destroy(){var t,o;o=!0,(t=this).$$&&(r(t.$$.on_destroy),t.$$.fragment.d(o),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={}),this.$destroy=n}$on(t,n){const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(){}}const F={};var D=()=>(function(t){return x().$$.context.get(t)})(F);function G(t){var n,o,e,i,r,c,s,g,b,y=t.notification.text,x=t.notification.text;const _=t.$$slots.default,k=f(_,t,null),N=t.$$slots.default,w=f(N,t,null);return{c(){var f,a,u,l;n=p("div"),o=p("div"),k||(e=m(y)),k&&k.c(),i=h(),w||(r=m(x)),w&&w.c(),c=h(),(s=p("button")).textContent="Ã—",o.className="notification-context",n.className="notification",f=s,a="click",u=t.removeNotifications,f.addEventListener(a,u,l),b=()=>f.removeEventListener(a,u,l)},l(t){k&&k.l(div0_nodes),w&&w.l(div0_nodes)},m(t,f){$(t,n,f),l(n,o),k?k.m(o,null):l(o,e),l(o,i),w?w.m(o,null):l(o,r),l(n,c),l(n,s),g=!0},p(t,n){k||g&&!t.notification||y===(y=n.notification.text)||v(e,y),k&&k.p&&t.$$scope&&k.p(u(_,n,t,null),a(_,n,null)),w||g&&!t.notification||x===(x=n.notification.text)||v(r,x),w&&w.p&&t.$$scope&&w.p(u(N,n,t,null),a(N,n,null))},i(t){g||(k&&k.i&&k.i(t),w&&w.i&&w.i(t),g=!0)},o(t){k&&k.o&&k.o(t),w&&w.o&&w.o(t),g=!1},d(t){t&&d(n),k&&k.d(t),w&&w.d(t),b()}}}function H(t,n,o){let{notification:e=null}=n;const{id:i,removeAfter:r}=e,{remove:c}=D(),s=()=>c(i),f=setTimeout(s,r||4e3);var a;a=()=>{f&&clearTimeout(f)},x().$$.on_destroy.push(a);let{$$slots:u={},$$scope:l}=n;return t.$set=t=>{"notification"in t&&o("notification",e=t.notification),"$$scope"in t&&o("$$scope",l=t.$$scope)},{notification:e,removeNotifications:s,$$slots:u,$$scope:l}}class J extends z{constructor(t){super(),q(this,t,H,G,s,["notification"])}}var K=(()=>{const{subscribe:t,set:o,update:e}=function(t,o=n){let e;const i=[];function r(n){if(s(t,n)){if(t=n,!e)return;i.forEach(t=>t[1]()),i.forEach(n=>n[0](t))}}return{set:r,update:function(n){r(n(t))},subscribe:function(c,s=n){const f=[c,s];return i.push(f),1===i.length&&(e=o(r)||n),c(t),()=>{const t=i.indexOf(f);-1!==t&&i.splice(t,1),0===i.length&&e()}}}}([]);return{subscribe:t,add:t=>((t,n)=>{t&&"object"==typeof t&&(!t||t.id||t.text)&&n(n=>[...n,t])})(t,e),remove:t=>((t,n)=>n(n=>n.filter(n=>n.id!==t)))(t,e),clear:()=>(t=>t([]))(o)}})();function Q(t,n,o){const e=Object.create(t);return e.notification=n[o],e}function R(t,n,o){const e=Object.create(t);return e.position=n[o],e}function U(t){var n,o,e,i,r=[W,V],c=[];function s(t){return t.notificationItem?0:1}return n=s(t),o=c[n]=r[n](t),{c(){o.c(),e=g()},m(t,o){c[n].m(t,o),$(t,e,o),i=!0},p(t,i){var f=n;(n=s(i))===f?c[n].p(t,i):(S(),A(()=>{c[f].d(1),c[f]=null}),o.o(1),T(),(o=c[n])||(o=c[n]=r[n](i)).c(),o.i(1),o.m(e.parentNode,e))},i(t){i||(o&&o.i(),i=!0)},o(t){o&&o.o(),i=!1},d(t){c[n].d(t),t&&d(e)}}}function V(t){var n,o=new J({props:{notification:t.notification}});return{c(){o.$$.fragment.c()},m(t,e){L(o,t,e),n=!0},p(t,n){var e={};t.$store&&(e.notification=n.notification),o.$set(e)},i(t){n||(o.$$.fragment.i(t),n=!0)},o(t){o.$$.fragment.o(t),n=!1},d(t){o.$destroy(t)}}}function W(t){var n,o,e=t.notificationItem;function i(t){return{props:{notification:t.notification}}}if(e)var r=new e(i(t));return{c(){r&&r.$$.fragment.c(),n=g()},m(t,e){r&&L(r,t,e),$(t,n,e),o=!0},p(t,o){var c={};if(t.$store&&(c.notification=o.notification),e!==(e=o.notificationItem)){if(r){S();const t=r;A(()=>{t.$destroy()}),t.$$.fragment.o(1),T()}e?((r=new e(i(o))).$$.fragment.c(),r.$$.fragment.i(1),L(r,n.parentNode,n)):r=null}else e&&r.$set(c)},i(t){o||(r&&r.$$.fragment.i(t),o=!0)},o(t){r&&r.$$.fragment.o(t),o=!1},d(t){t&&d(n),r&&r.$destroy(t)}}}function X(t,n){var o,e,i,r=n.notification.position===n.position&&U(n);return{key:t,first:null,c(){o=g(),r&&r.c(),e=g(),this.first=o},m(t,n){$(t,o,n),r&&r.m(t,n),$(t,e,n),i=!0},p(t,n){n.notification.position===n.position?r?(r.p(t,n),r.i(1)):((r=U(n)).c(),r.i(1),r.m(e.parentNode,e)):r&&(S(),A(()=>{r.d(1),r=null}),r.o(1),T())},i(t){i||(r&&r.i(),i=!0)},o(t){r&&r.o(),i=!1},d(t){t&&d(o),r&&r.d(t),t&&d(e)}}}function Y(t){var n,o,e,i=[],r=new Map,c=t.$store;const s=t=>t.notification.id;for(var f=0;f<c.length;f+=1){let n=Q(t,c,f),o=s(n);r.set(o,i[f]=X(o,n))}return{c(){for(n=p("div"),f=0;f<i.length;f+=1)i[f].c();o=h(),n.className=`notification-${t.position}`+" svelte-hm5tuf"},m(t,r){for($(t,n,r),f=0;f<i.length;f+=1)i[f].m(n,null);l(n,o),e=!0},p(t,e){const c=e.$store;S(),i=function(t,n,o,e,i,r,c,s,f,a,u,l){let $=t.length,d=r.length,p=$;const m={};for(;p--;)m[t[p].key]=p;const h=[],g=new Map,v=new Map;for(p=d;p--;){const t=l(i,r,p),s=o(t);let f=c.get(s);f?e&&f.p(n,t):(f=a(s,t)).c(),g.set(s,h[p]=f),s in m&&v.set(s,Math.abs(p-m[s]))}const b=new Set,y=new Set;function x(t){t.i&&t.i(1),t.m(s,u),c.set(t.key,t),u=t.first,d--}for(;$&&d;){const n=h[d-1],o=t[$-1],e=n.key,i=o.key;n===o?(u=n.first,$--,d--):g.has(i)?!c.has(e)||b.has(e)?x(n):y.has(i)?$--:v.get(e)>v.get(i)?(y.add(e),x(n)):(b.add(i),$--):(f(o,c),$--)}for(;$--;){const n=t[$];g.has(n.key)||f(n,c)}for(;d;)x(h[d-1]);return h}(i,t,s,1,e,c,r,n,B,X,o,Q),T()},i(t){if(!e){for(var n=0;n<c.length;n+=1)i[n].i();e=!0}},o(t){for(f=0;f<i.length;f+=1)i[f].o();e=!1},d(t){for(t&&d(n),f=0;f<i.length;f+=1)i[f].d()}}}function Z(t){var n,o,e;const i=t.$$slots.default,r=f(i,t,null);for(var c=t.positions,s=[],l=0;l<c.length;l+=1)s[l]=Y(R(t,c,l));function m(t,n,o){s[t]&&(n&&A(()=>{s[t].d(n),s[t]=null}),s[t].o(o))}return{c(){r&&r.c(),n=h(),o=p("div");for(var t=0;t<s.length;t+=1)s[t].c();o.className="notifications"},l(t){r&&r.l(t)},m(t,i){r&&r.m(t,i),$(t,n,i),$(t,o,i);for(var c=0;c<s.length;c+=1)s[c].m(o,null);e=!0},p(t,n){if(r&&r.p&&t.$$scope&&r.p(u(i,n,t,null),a(i,n,null)),t.positions||t.$store||t.notificationItem){c=n.positions;for(var e=0;e<c.length;e+=1){const i=R(n,c,e);s[e]?(s[e].p(t,i),s[e].i(1)):(s[e]=Y(i),s[e].c(),s[e].i(1),s[e].m(o,null))}for(S();e<s.length;e+=1)m(e,1,1);T()}},i(t){if(!e){r&&r.i&&r.i(t);for(var n=0;n<c.length;n+=1)s[n].i();e=!0}},o(t){r&&r.o&&r.o(t),s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)m(t,0);e=!1},d(t){r&&r.d(t),t&&(d(n),d(o)),function(t,n){for(let o=0;o<t.length;o+=1)t[o]&&t[o].d(n)}(s,t)}}}function tt(t,n,o){let e;!function(t,n,o){const e=n.subscribe(o);t.$$.on_destroy.push(e.unsubscribe?()=>e.unsubscribe():e)}(t,K,t=>{o("$store",e=t)});let{notificationItem:i=null}=n;!function(t,n){x().$$.context.set(t,n)}(F,K);let{$$slots:r={},$$scope:c}=n;return t.$set=t=>{"notificationItem"in t&&o("notificationItem",i=t.notificationItem),"$$scope"in t&&o("$$scope",c=t.$$scope)},{notificationItem:i,positions:["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"],$store:e,$$slots:r,$$scope:c}}t.Notifications=class extends z{constructor(t){super(),q(this,t,tt,Z,s,["notificationItem"])}},t.getContext=D,Object.defineProperty(t,"__esModule",{value:!0})});
