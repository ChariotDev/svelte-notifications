!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).Notifications={})}(this,function(t){"use strict";function n(){}function e(t,n){for(const e in n)t[e]=n[e];return t}function o(t){return t()}function i(){return Object.create(null)}function r(t){t.forEach(o)}function c(t){return"function"==typeof t}function f(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function s(t,n,e){if(t){const o=u(t,n,e);return t[0](o)}}function u(t,n,o){return t[1]?e({},e(n.$$scope.ctx,t[1](o?o(n):{}))):n.$$scope.ctx}function a(t,n,o,i){return t[1]?e({},e(n.$$scope.changed||{},t[1](i?i(o):{}))):n.$$scope.changed||{}}function l(t,n){t.appendChild(n)}function $(t,n,e){t.insertBefore(n,e||null)}function d(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function h(){return m(" ")}function g(){return m("")}function v(t,n,e){null==e?t.removeAttribute(n):t.setAttribute(n,e)}let b;function x(t){b=t}function y(){if(!b)throw new Error("Function called outside component initialization");return b}const _=[],w=Promise.resolve();let k=!1;const E=[],I=[],N=[];function A(t){I.push(t)}function j(){const t=new Set;do{for(;_.length;){const t=_.shift();x(t),M(t.$$)}for(;E.length;)E.shift()();for(;I.length;){const n=I.pop();t.has(n)||(n(),t.add(n))}}while(_.length);for(;N.length;)N.pop()();k=!1}function M(t){t.fragment&&(t.update(t.dirty),r(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(A))}const O=new Set;let q;function C(){q={remaining:0,callbacks:[]}}function S(){q.remaining||r(q.callbacks)}function T(t,n){t&&t.i&&(O.delete(t),t.i(n))}function B(t,n,e){if(t&&t.o){if(O.has(t))return;O.add(t),q.callbacks.push(()=>{O.delete(t),e&&(t.d(1),e())}),t.o(n)}}function L(t,n){B(t,1,()=>{!function(t,n){t.d(1),n.delete(t.key)}(t,n)})}function P(t,n,e){const{fragment:i,on_mount:f,on_destroy:s,after_render:u}=t.$$;i.m(n,e),A(()=>{const n=f.map(o).filter(c);s?s.push(...n):r(n),t.$$.on_mount=[]}),u.forEach(A)}function z(t,n){t.$$.fragment&&(r(t.$$.on_destroy),n&&t.$$.fragment.d(1),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function D(t,n){t.$$.dirty||(_.push(t),k||(k=!0,w.then(j)),t.$$.dirty=i()),t.$$.dirty[n]=!0}function F(t,e,o,c,f,s){const u=b;x(t);const a=e.props||{},l=t.$$={fragment:null,ctx:null,props:s,update:n,not_equal:f,bound:i(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(u?u.$$.context:[]),callbacks:i(),dirty:null};let $=!1;l.ctx=o?o(t,a,(n,e)=>{l.ctx&&f(l.ctx[n],l.ctx[n]=e)&&(l.bound[n]&&l.bound[n](e),$&&D(t,n))}):a,l.update(),$=!0,r(l.before_render),l.fragment=c(l.ctx),e.target&&(e.hydrate?l.fragment.l(function(t){return Array.from(t.childNodes)}(e.target)):l.fragment.c(),e.intro&&T(t.$$.fragment),P(t,e.target,e.anchor),j()),x(u)}class G{$destroy(){z(this,1),this.$destroy=n}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}const H={};var J=()=>(function(t){return y().$$.context.get(t)})(H);function K(t){var n,e,o,i,r,c,f,g=t.notification.text;const b=t.$$slots.default,x=s(b,t,null);return{c(){var c,s,u,a;n=p("div"),e=p("div"),x||(o=m(g)),x&&x.c(),i=h(),(r=p("button")).textContent="Ã—",v(e,"class","notification-context svelte-1xquvfe"),v(r,"class","svelte-1xquvfe"),v(n,"class","notification svelte-1xquvfe"),c=r,s="click",u=t.removeNotifications,c.addEventListener(s,u,a),f=()=>c.removeEventListener(s,u,a)},l(t){x&&x.l(div0_nodes)},m(t,f){$(t,n,f),l(n,e),x?x.m(e,null):l(e,o),l(n,i),l(n,r),c=!0},p(t,n){x||c&&!t.notification||g===(g=n.notification.text)||function(t,n){n=""+n,t.data!==n&&(t.data=n)}(o,g),x&&x.p&&t.$$scope&&x.p(a(b,n,t,null),u(b,n,null))},i(t){c||(T(x,t),c=!0)},o(t){B(x,t),c=!1},d(t){t&&d(n),x&&x.d(t),f()}}}function Q(t,n,e){let{notification:o}=n,i=null;const{id:r,removeAfter:c}=o,{remove:f}=J(),s=()=>f(r);var u;c&&(i=setTimeout(s,c)),u=()=>{c&&i&&clearTimeout(i)},y().$$.on_destroy.push(u);let{$$slots:a={},$$scope:l}=n;return t.$set=t=>{"notification"in t&&e("notification",o=t.notification),"$$scope"in t&&e("$$scope",l=t.$$scope)},{notification:o,removeNotifications:s,$$slots:a,$$scope:l}}class R extends G{constructor(t){super(),F(this,t,Q,K,f,["notification"])}}const U=["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"],V=(t,n)=>{if(!(t=>!(!t||!t.text||"string"!=typeof t.text||!U.includes(t.position)))(t))throw new Error("");const{id:e=(new Date).getTime(),removeAfter:o=+t.removeAfter,...i}=t;n(t=>[...t,{id:e,removeAfter:o,...i}])};var W=(()=>{const{subscribe:t,set:e,update:o}=function(t,e=n){let o;const i=[];function r(n){if(f(t,n)){if(t=n,!o)return;i.forEach(t=>t[1]()),i.forEach(n=>n[0](t))}}return{set:r,update:function(n){r(n(t))},subscribe:function(c,f=n){const s=[c,f];return i.push(s),1===i.length&&(o=e(r)||n),c(t),()=>{const t=i.indexOf(s);-1!==t&&i.splice(t,1),0===i.length&&o()}}}}([]);return{subscribe:t,add:t=>V(t,o),remove:t=>((t,n)=>n(n=>n.filter(n=>n.id!==t)))(t,o),clear:()=>(t=>t([]))(e)}})();function X(t,n,e){const o=Object.create(t);return o.notification=n[e],o}function Y(t,n,e){const o=Object.create(t);return o.position=n[e],o}function Z(t){var n,e,o,i,r=[nt,tt],c=[];function f(t){return t.notificationItem?0:1}return n=f(t),e=c[n]=r[n](t),{c(){e.c(),o=g()},m(t,e){c[n].m(t,e),$(t,o,e),i=!0},p(t,i){var s=n;(n=f(i))===s?c[n].p(t,i):(C(),B(c[s],1,()=>{c[s]=null}),S(),(e=c[n])||(e=c[n]=r[n](i)).c(),T(e,1),e.m(o.parentNode,o))},i(t){i||(T(e),i=!0)},o(t){B(e),i=!1},d(t){c[n].d(t),t&&d(o)}}}function tt(t){var n,e=new R({props:{notification:t.notification}});return{c(){e.$$.fragment.c()},m(t,o){P(e,t,o),n=!0},p(t,n){var o={};t.$store&&(o.notification=n.notification),e.$set(o)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function nt(t){var n,e,o=t.notificationItem;function i(t){return{props:{notification:t.notification}}}if(o)var r=new o(i(t));return{c(){r&&r.$$.fragment.c(),n=g()},m(t,o){r&&P(r,t,o),$(t,n,o),e=!0},p(t,e){var c={};if(t.$store&&(c.notification=e.notification),o!==(o=e.notificationItem)){if(r){C();const t=r;B(t.$$.fragment,1,()=>{z(t)}),S()}o?((r=new o(i(e))).$$.fragment.c(),T(r.$$.fragment,1),P(r,n.parentNode,n)):r=null}else o&&r.$set(c)},i(t){e||(T(r.$$.fragment,t),e=!0)},o(t){r&&B(r.$$.fragment,t),e=!1},d(t){t&&d(n),r&&z(r,t)}}}function et(t,n){var e,o,i,r=n.notification.position===n.position&&Z(n);return{key:t,first:null,c(){e=g(),r&&r.c(),o=g(),this.first=e},m(t,n){$(t,e,n),r&&r.m(t,n),$(t,o,n),i=!0},p(t,n){n.notification.position===n.position?r?(r.p(t,n),T(r,1)):((r=Z(n)).c(),T(r,1),r.m(o.parentNode,o)):r&&(C(),B(r,1,()=>{r=null}),S())},i(t){i||(T(r),i=!0)},o(t){B(r),i=!1},d(t){t&&d(e),r&&r.d(t),t&&d(o)}}}function ot(t){var n,e,o,i=[],r=new Map,c=t.$store;const f=t=>t.notification.id;for(var s=0;s<c.length;s+=1){let n=X(t,c,s),e=f(n);r.set(e,i[s]=et(e,n))}return{c(){for(n=p("div"),s=0;s<i.length;s+=1)i[s].c();e=h(),v(n,"class",`notification-${t.position}`+" svelte-45qhkl")},m(t,r){for($(t,n,r),s=0;s<i.length;s+=1)i[s].m(n,null);l(n,e),o=!0},p(t,o){const c=o.$store;C(),i=function(t,n,e,o,i,r,c,f,s,u,a,l){let $=t.length,d=r.length,p=$;const m={};for(;p--;)m[t[p].key]=p;const h=[],g=new Map,v=new Map;for(p=d;p--;){const t=l(i,r,p),f=e(t);let s=c.get(f);s?o&&s.p(n,t):(s=u(f,t)).c(),g.set(f,h[p]=s),f in m&&v.set(f,Math.abs(p-m[f]))}const b=new Set,x=new Set;function y(t){T(t,1),t.m(f,a),c.set(t.key,t),a=t.first,d--}for(;$&&d;){const n=h[d-1],e=t[$-1],o=n.key,i=e.key;n===e?(a=n.first,$--,d--):g.has(i)?!c.has(o)||b.has(o)?y(n):x.has(i)?$--:v.get(o)>v.get(i)?(x.add(o),y(n)):(b.add(i),$--):(s(e,c),$--)}for(;$--;){const n=t[$];g.has(n.key)||s(n,c)}for(;d;)y(h[d-1]);return h}(i,t,f,1,o,c,r,n,L,et,e,X),S()},i(t){if(!o){for(var n=0;n<c.length;n+=1)T(i[n]);o=!0}},o(t){for(s=0;s<i.length;s+=1)B(i[s]);o=!1},d(t){for(t&&d(n),s=0;s<i.length;s+=1)i[s].d()}}}function it(t){var n,e,o;const i=t.$$slots.default,r=s(i,t,null);for(var c=U,f=[],l=0;l<c.length;l+=1)f[l]=ot(Y(t,c,l));const m=t=>B(f[t],1,()=>{f[t]=null});return{c(){r&&r.c(),n=h(),e=p("div");for(var t=0;t<f.length;t+=1)f[t].c();v(e,"class","notifications")},l(t){r&&r.l(t)},m(t,i){r&&r.m(t,i),$(t,n,i),$(t,e,i);for(var c=0;c<f.length;c+=1)f[c].m(e,null);o=!0},p(t,n){if(r&&r.p&&t.$$scope&&r.p(a(i,n,t,null),u(i,n,null)),t.positions||t.$store||t.notificationItem){c=U;for(var o=0;o<c.length;o+=1){const i=Y(n,c,o);f[o]?(f[o].p(t,i),T(f[o],1)):(f[o]=ot(i),f[o].c(),T(f[o],1),f[o].m(e,null))}for(C();o<f.length;o+=1)m(o);S()}},i(t){if(!o){T(r,t);for(var n=0;n<c.length;n+=1)T(f[n]);o=!0}},o(t){B(r,t),f=f.filter(Boolean);for(let t=0;t<f.length;t+=1)B(f[t]);o=!1},d(t){r&&r.d(t),t&&(d(n),d(e)),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(f,t)}}}function rt(t,n,e){let o;!function(t,n,e){const o=n.subscribe(e);t.$$.on_destroy.push(o.unsubscribe?()=>o.unsubscribe():o)}(t,W,t=>{e("$store",o=t)});let{notificationItem:i=null}=n;!function(t,n){y().$$.context.set(t,n)}(H,W);let{$$slots:r={},$$scope:c}=n;return t.$set=t=>{"notificationItem"in t&&e("notificationItem",i=t.notificationItem),"$$scope"in t&&e("$$scope",c=t.$$scope)},{notificationItem:i,$store:o,$$slots:r,$$scope:c}}t.Notifications=class extends G{constructor(t){super(),F(this,t,rt,it,f,["notificationItem"])}},t.getContext=J,Object.defineProperty(t,"__esModule",{value:!0})});
