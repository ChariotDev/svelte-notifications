!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).Notifications={})}(this,function(t){"use strict";function n(){}function e(t,n){for(const e in n)t[e]=n[e];return t}function o(t){return t()}function i(){return Object.create(null)}function r(t){t.forEach(o)}function c(t){return"function"==typeof t}function s(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function f(t,n,e){if(t){const o=a(t,n,e);return t[0](o)}}function a(t,n,o){return t[1]?e({},e(n.$$scope.ctx,t[1](o?o(n):{}))):n.$$scope.ctx}function u(t,n,o,i){return t[1]?e({},e(n.$$scope.changed||{},t[1](i?i(o):{}))):n.$$scope.changed||{}}function l(t,n){t.appendChild(n)}function $(t,n,e){t.insertBefore(n,e||null)}function d(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function h(){return m(" ")}function g(){return m("")}let v;function y(t){v=t}function b(){if(!v)throw new Error("Function called outside component initialization");return v}const x=[],_=Promise.resolve();let k=!1;const w=[],N=[],I=[];function E(t){N.push(t)}function j(){const t=new Set;do{for(;x.length;){const t=x.shift();y(t),M(t.$$)}for(;w.length;)w.shift()();for(;N.length;){const n=N.pop();t.has(n)||(n(),t.add(n))}}while(x.length);for(;I.length;)I.pop()();k=!1}function M(t){t.fragment&&(t.update(t.dirty),r(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(E))}let O;function T(){O={remaining:0,callbacks:[]}}function A(){O.remaining||r(O.callbacks)}function C(t){O.callbacks.push(t)}function D(t,n){C(()=>{!function(t,n){t.d(1),n.delete(t.key)}(t,n)}),t.o(1)}function S(t,n,e){const{fragment:i,on_mount:s,on_destroy:f,after_render:a}=t.$$;i.m(n,e),E(()=>{const n=s.map(o).filter(c);f?f.push(...n):r(n),t.$$.on_mount=[]}),a.forEach(E)}function B(t,n){t.$$.dirty||(x.push(t),k||(k=!0,_.then(j)),t.$$.dirty=i()),t.$$.dirty[n]=!0}function L(t,e,o,c,s,f){const a=v;y(t);const u=e.props||{},l=t.$$={fragment:null,ctx:null,props:f,update:n,not_equal:s,bound:i(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(a?a.$$.context:[]),callbacks:i(),dirty:null};let $=!1;l.ctx=o?o(t,u,(n,e)=>{l.ctx&&s(l.ctx[n],l.ctx[n]=e)&&(l.bound[n]&&l.bound[n](e),$&&B(t,n))}):u,l.update(),$=!0,r(l.before_render),l.fragment=c(l.ctx),e.target&&(e.hydrate?l.fragment.l(function(t){return Array.from(t.childNodes)}(e.target)):l.fragment.c(),e.intro&&t.$$.fragment.i&&t.$$.fragment.i(),S(t,e.target,e.anchor),j()),y(a)}class P{$destroy(){var t,e;e=!0,(t=this).$$&&(r(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={}),this.$destroy=n}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}const q={};var z=()=>(function(t){return b().$$.context.get(t)})(q);const F=["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"];function G(t){var n,e,o,i,r,c,s,g=t.notification.text;const v=t.$$slots.default,y=f(v,t,null);return{c(){var c,f,a,u;n=p("div"),e=p("div"),y||(o=m(g)),y&&y.c(),i=h(),(r=p("button")).textContent="Ã—",e.className="notification-context svelte-19ykr5b",r.className="svelte-19ykr5b",n.className="notification svelte-19ykr5b",c=r,f="click",a=t.removeNotifications,c.addEventListener(f,a,u),s=()=>c.removeEventListener(f,a,u)},l(t){y&&y.l(div0_nodes)},m(t,s){$(t,n,s),l(n,e),y?y.m(e,null):l(e,o),l(n,i),l(n,r),c=!0},p(t,n){y||c&&!t.notification||g===(g=n.notification.text)||function(t,n){n=""+n,t.data!==n&&(t.data=n)}(o,g),y&&y.p&&t.$$scope&&y.p(u(v,n,t,null),a(v,n,null))},i(t){c||(y&&y.i&&y.i(t),c=!0)},o(t){y&&y.o&&y.o(t),c=!1},d(t){t&&d(n),y&&y.d(t),s()}}}function H(t,n,e){let{notification:o={id:(new Date).getTime(),position:F[4]}}=n,i=null;const{id:r,removeAfter:c}=o,{remove:s}=z(),f=()=>s(r);var a;c&&(i=setTimeout(f,c)),a=()=>{c&&i&&clearTimeout(i)},b().$$.on_destroy.push(a);let{$$slots:u={},$$scope:l}=n;return t.$set=t=>{"notification"in t&&e("notification",o=t.notification),"$$scope"in t&&e("$$scope",l=t.$$scope)},{notification:o,removeNotifications:f,$$slots:u,$$scope:l}}class J extends P{constructor(t){super(),L(this,t,H,G,s,["notification"])}}var K=(()=>{const{subscribe:t,set:e,update:o}=function(t,e=n){let o;const i=[];function r(n){if(s(t,n)){if(t=n,!o)return;i.forEach(t=>t[1]()),i.forEach(n=>n[0](t))}}return{set:r,update:function(n){r(n(t))},subscribe:function(c,s=n){const f=[c,s];return i.push(f),1===i.length&&(o=e(r)||n),c(t),()=>{const t=i.indexOf(f);-1!==t&&i.splice(t,1),0===i.length&&o()}}}}([]);return{subscribe:t,add:t=>((t={id:(new Date).getTime(),position:F[4]},n)=>{t&&"object"==typeof t&&t.text&&"string"==typeof t.text&&"string"==typeof t.position&&F.some(n=>n===t.position)&&(t.removeAfter&&(t.removeAfter=+t.removeAfter),t.id||(t.id=(new Date).getTime()),n(n=>[...n,t]))})(t,o),remove:t=>((t,n)=>n(n=>n.filter(n=>n.id!==t)))(t,o),clear:()=>(t=>t([]))(e)}})();function Q(t,n,e){const o=Object.create(t);return o.notification=n[e],o}function R(t,n,e){const o=Object.create(t);return o.position=n[e],o}function U(t){var n,e,o,i,r=[W,V],c=[];function s(t){return t.notificationItem?0:1}return n=s(t),e=c[n]=r[n](t),{c(){e.c(),o=g()},m(t,e){c[n].m(t,e),$(t,o,e),i=!0},p(t,i){var f=n;(n=s(i))===f?c[n].p(t,i):(T(),C(()=>{c[f].d(1),c[f]=null}),e.o(1),A(),(e=c[n])||(e=c[n]=r[n](i)).c(),e.i(1),e.m(o.parentNode,o))},i(t){i||(e&&e.i(),i=!0)},o(t){e&&e.o(),i=!1},d(t){c[n].d(t),t&&d(o)}}}function V(t){var n,e=new J({props:{notification:t.notification}});return{c(){e.$$.fragment.c()},m(t,o){S(e,t,o),n=!0},p(t,n){var o={};t.$store&&(o.notification=n.notification),e.$set(o)},i(t){n||(e.$$.fragment.i(t),n=!0)},o(t){e.$$.fragment.o(t),n=!1},d(t){e.$destroy(t)}}}function W(t){var n,e,o=t.notificationItem;function i(t){return{props:{notification:t.notification}}}if(o)var r=new o(i(t));return{c(){r&&r.$$.fragment.c(),n=g()},m(t,o){r&&S(r,t,o),$(t,n,o),e=!0},p(t,e){var c={};if(t.$store&&(c.notification=e.notification),o!==(o=e.notificationItem)){if(r){T();const t=r;C(()=>{t.$destroy()}),t.$$.fragment.o(1),A()}o?((r=new o(i(e))).$$.fragment.c(),r.$$.fragment.i(1),S(r,n.parentNode,n)):r=null}else o&&r.$set(c)},i(t){e||(r&&r.$$.fragment.i(t),e=!0)},o(t){r&&r.$$.fragment.o(t),e=!1},d(t){t&&d(n),r&&r.$destroy(t)}}}function X(t,n){var e,o,i,r=n.notification.position===n.position&&U(n);return{key:t,first:null,c(){e=g(),r&&r.c(),o=g(),this.first=e},m(t,n){$(t,e,n),r&&r.m(t,n),$(t,o,n),i=!0},p(t,n){n.notification.position===n.position?r?(r.p(t,n),r.i(1)):((r=U(n)).c(),r.i(1),r.m(o.parentNode,o)):r&&(T(),C(()=>{r.d(1),r=null}),r.o(1),A())},i(t){i||(r&&r.i(),i=!0)},o(t){r&&r.o(),i=!1},d(t){t&&d(e),r&&r.d(t),t&&d(o)}}}function Y(t){var n,e,o,i=[],r=new Map,c=t.$store;const s=t=>t.notification.id;for(var f=0;f<c.length;f+=1){let n=Q(t,c,f),e=s(n);r.set(e,i[f]=X(e,n))}return{c(){for(n=p("div"),f=0;f<i.length;f+=1)i[f].c();e=h(),n.className=`notification-${t.position}`+" svelte-7uflap"},m(t,r){for($(t,n,r),f=0;f<i.length;f+=1)i[f].m(n,null);l(n,e),o=!0},p(t,o){const c=o.$store;T(),i=function(t,n,e,o,i,r,c,s,f,a,u,l){let $=t.length,d=r.length,p=$;const m={};for(;p--;)m[t[p].key]=p;const h=[],g=new Map,v=new Map;for(p=d;p--;){const t=l(i,r,p),s=e(t);let f=c.get(s);f?o&&f.p(n,t):(f=a(s,t)).c(),g.set(s,h[p]=f),s in m&&v.set(s,Math.abs(p-m[s]))}const y=new Set,b=new Set;function x(t){t.i&&t.i(1),t.m(s,u),c.set(t.key,t),u=t.first,d--}for(;$&&d;){const n=h[d-1],e=t[$-1],o=n.key,i=e.key;n===e?(u=n.first,$--,d--):g.has(i)?!c.has(o)||y.has(o)?x(n):b.has(i)?$--:v.get(o)>v.get(i)?(b.add(o),x(n)):(y.add(i),$--):(f(e,c),$--)}for(;$--;){const n=t[$];g.has(n.key)||f(n,c)}for(;d;)x(h[d-1]);return h}(i,t,s,1,o,c,r,n,D,X,e,Q),A()},i(t){if(!o){for(var n=0;n<c.length;n+=1)i[n].i();o=!0}},o(t){for(f=0;f<i.length;f+=1)i[f].o();o=!1},d(t){for(t&&d(n),f=0;f<i.length;f+=1)i[f].d()}}}function Z(t){var n,e,o;const i=t.$$slots.default,r=f(i,t,null);for(var c=F,s=[],l=0;l<c.length;l+=1)s[l]=Y(R(t,c,l));function m(t,n,e){s[t]&&(n&&C(()=>{s[t].d(n),s[t]=null}),s[t].o(e))}return{c(){r&&r.c(),n=h(),e=p("div");for(var t=0;t<s.length;t+=1)s[t].c();e.className="notifications"},l(t){r&&r.l(t)},m(t,i){r&&r.m(t,i),$(t,n,i),$(t,e,i);for(var c=0;c<s.length;c+=1)s[c].m(e,null);o=!0},p(t,n){if(r&&r.p&&t.$$scope&&r.p(u(i,n,t,null),a(i,n,null)),t.positions||t.$store||t.notificationItem){c=F;for(var o=0;o<c.length;o+=1){const i=R(n,c,o);s[o]?(s[o].p(t,i),s[o].i(1)):(s[o]=Y(i),s[o].c(),s[o].i(1),s[o].m(e,null))}for(T();o<s.length;o+=1)m(o,1,1);A()}},i(t){if(!o){r&&r.i&&r.i(t);for(var n=0;n<c.length;n+=1)s[n].i();o=!0}},o(t){r&&r.o&&r.o(t),s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)m(t,0,0);o=!1},d(t){r&&r.d(t),t&&(d(n),d(e)),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(s,t)}}}function tt(t,n,e){let o;!function(t,n,e){const o=n.subscribe(e);t.$$.on_destroy.push(o.unsubscribe?()=>o.unsubscribe():o)}(t,K,t=>{e("$store",o=t)});let{notificationItem:i=null}=n;!function(t,n){b().$$.context.set(t,n)}(q,K);let{$$slots:r={},$$scope:c}=n;return t.$set=t=>{"notificationItem"in t&&e("notificationItem",i=t.notificationItem),"$$scope"in t&&e("$$scope",c=t.$$scope)},{notificationItem:i,$store:o,$$slots:r,$$scope:c}}t.Notifications=class extends P{constructor(t){super(),L(this,t,tt,Z,s,["notificationItem"])}},t.getContext=z,Object.defineProperty(t,"__esModule",{value:!0})});
